# -*- coding: utf-8 -*-
"""Untitled4.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1pJSgDZNAtyI0J9uMfgY4ppTtPXnQ4vM4
"""

import streamlit as st
import joblib
import pandas as pd
st.set_page_config(
    page_title="üè° House Price Predictor",
    layout="centered",
    page_icon="üè†"
)
st.markdown(
    """
    <style>
    /* FULL PAGE BACKGROUND */
    .stApp {
        background: linear-gradient(135deg, #c9d6ff 0%, #e2e2e2 100%) !important;
        background-size: cover !important;
    }

    /* TITLE BOX */
    .title-box {
        padding: 15px;
        background: linear-gradient(135deg, #4A90E2, #0F5AB7);
        border-radius: 12px;
        color: white;
        text-align: center;
        margin-bottom: 25px;
        box-shadow: 0px 4px 12px rgba(0,0,0,0.2);
    }

    /* SECTION BOXES */
    .section-box {
        background: rgba(255,255,255,0.85);
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }

    /* RESULT BOX */
    .result-box {
        padding: 20px;
        border-radius: 12px;
        background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        color: black;
        font-size: 24px;
        font-weight: bold;
        text-align: center;
        box-shadow: 2px 2px 12px rgba(0,0,0,0.25);
        margin-top: 25px;
    }
    </style>
    """,
    unsafe_allow_html=True
)

model = joblib.load("best_house_price_model.pkl")

st.markdown("<h1>üè° House Price Prediction App</h1>", unsafe_allow_html=True)
st.write("### Enter details about the house to estimate its selling price.")

mszoning_map = {
    "Residential Low Density (RL)": "RL",
    "Residential Medium (RM)": "RM",
    "Commercial (C all)": "C (all)",
    "Floating Village Residential (FV)": "FV",
    "Residential High Density (RH)": "RH"
}

lotconfig_map = {
    "Inside Lot": "Inside",
    "Frontage on 2 sides (FR2)": "FR2",
    "Corner Lot": "Corner",
    "Cul-de-sac": "CulDSac",
    "Frontage on 3 sides (FR3)": "FR3"
}

bldgtype_map = {
    "Single Family Home": "1Fam",
    "Two-Family Conversion": "2fmCon",
    "Duplex": "Duplex",
    "Townhouse End Unit": "TwnhsE",
    "Townhouse Inside Unit": "Twnhs"
}

exterior_map = {
    "Vinyl Siding": "VinylSd", "Metal Siding": "MetalSd", "Wood Siding": "Wd Sdng",
    "Hardboard": "HdBoard", "Brick Face": "BrkFace", "Wood Shingles": "WdShing",
    "Cement Board": "CemntBd", "Plywood": "Plywood", "Asbestos Shingles": "AsbShng",
    "Stucco": "Stucco", "Brick Common": "BrkComm", "Asphalt Shingles": "AsphShn",
    "Stone": "Stone", "Imitation Stucco": "ImStucc", "Cinder Block": "CBlock"
}

mssubclass_map = {
    "1-Story Newer (60)": 60, "1-Story Older (20)": 20, "2-Story (70)": 70,
    "Split Level (50)": 50, "Luxury Home (190)": 190, "Story-and-a-Half (45)": 45,
    "One-and-Half Unfinished (90)": 90, "Split Foyer (120)": 120,
    "Ranch (30)": 30, "2-Story 85": 85, "2-Story 80": 80, "1-Story 160": 160,
    "1-Story 75": 75, "1-Story 180": 180, "1-Story 40": 40
}

st.write("## üè† House Information")

col1, col2 = st.columns(2)

with col1:
    MSSubClass = st.selectbox("üè¢ Building Class", list(mssubclass_map.keys()))
    LotArea = st.number_input("üìê Lot Area (sq ft)", 500, 200000, 8000)
    OverallCond = st.slider("üèó Overall Condition", 1, 10, 5)
    MSZoning = st.selectbox("üó∫ Zoning Classification", list(mszoning_map.keys()))

with col2:
    YearBuilt = st.number_input("üìÖ Year Built", 1800, 2025, 2000)
    YearRemodAdd = st.number_input("üîß Year Remodeled", 1800, 2025, 2000)
    TotalBsmtSF = st.number_input("üèö Total Basement Area", 0, 3000, 800)
    BsmtFinSF2 = st.number_input("üèö Finished Basement SF2", 0, 1500, 200)
    LotConfig = st.selectbox("üìç Lot Configuration", list(lotconfig_map.keys()))

BldgType = st.selectbox("üè° Building Type", list(bldgtype_map.keys()))
Exterior1st = st.selectbox("üé® Exterior Material", list(exterior_map.keys()))

input_data = pd.DataFrame([{
    "Id": 1,
    "MSSubClass": mssubclass_map[MSSubClass],
    "LotArea": LotArea,
    "OverallCond": OverallCond,
    "YearBuilt": YearBuilt,
    "YearRemodAdd": YearRemodAdd,
    "BsmtFinSF2": BsmtFinSF2,
    "TotalBsmtSF": TotalBsmtSF,
    "MSZoning": mszoning_map[MSZoning],
    "LotConfig": lotconfig_map[LotConfig],
    "BldgType": bldgtype_map[BldgType],
    "Exterior1st": exterior_map[Exterior1st]
}])
if st.button("üîÆ Predict Price"):
    predicted_price = model.predict(input_data)[0]

    st.markdown(
        f"""
        <div class="result-box">
            Estimated House Price:<br>
            <span style='font-size:32px;'>üí≤{predicted_price:,.2f}</span>
        </div>
        """,
        unsafe_allow_html=True
    )